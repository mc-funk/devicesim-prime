/*! 2016-02-12*/
var app=angular.module("app",[]);console.log("devices.js loading"),app.controller("DeviceController",["$scope","$http",function(a,b){function c(a,c){var d=window.prompt("Enter the datapoint you would like to add below.");return null===d?void console.log("CANCEL write for rid "+c):(console.log("CONFIRM write for rid "+c+" data="+d),b.put("rpc/resource/"+a+"/"+c+"/"+d).then(function(a){if(200!==a.status)throw new Error("/rpc/resource put call from deleteByRid failed");if(!a.data.info)throw new Error("RPC error: ",a.status);console.log("resource put call successful for: "+c),$("#"+c+"-status").html("Recent value written: "+d)}))}function d(){return b.get("/rpc").then(function(c){function d(a,b){for(var c=0;c<a.length;c++){console.log(a[c].rid,":",b.aliases[a[c].rid],":",a[c].type);var e=b.aliases[a[c].rid];e?a[c].name=e[0]:a[c].name="Resource with no alias","client"==a[c].type&&(console.log("children["+c+"]:"+a[c]),h.push(a[c].rid)),a[c].children&&a[c].children.length>0&&(a[c].children=d(a[c].children,a[c].info))}return a}function e(a){return console.log("storeDeviceCiks called"),b({method:"POST",url:"rpc/storeCik/",data:{clientArray:a}}).then(function(b){if(200!==b.status)throw new Error("/rpc/getcik put call from storeDeviceCiks failed");if(!b.data)throw new Error("RPC getcik error: ",b.status);return"cik stored for: "+a})}if(200!==c.status)throw new Error("/rpc call from getDevices failed");if(!c.data.info)throw new Error("no valid auth provided");$("#deviceTest").show();var f=c.data.children,g=c.data.info,h=[];d(f,g);return e(h),a.device={},a.devices=f,console.log("scope.devices set to: ",f),c.data.children})}console.log("app.controller entered"),a.device={},a.childDevice={},a.devices=[],d(),a.getDevices=d,a.writeToDataport=c}]);