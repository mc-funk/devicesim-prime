/*! 2016-01-27*/
var app=angular.module("app",[]);console.log("devices.js loading"),app.controller("DeviceController",["$scope","$http",function(a,b){function c(a){console.log(a);var c=window.prompt("Enter the datapoint you would like to add below.");return null===c?void console.log("CANCEL write for rid "+a):(console.log("CONFIRM write for rid "+a+" data="+c),b.put("rpc/resource/"+a+"/"+c).then(function(b){if(200!==b.status)throw new Error("/rpc/resource put call from deleteByRid failed");if(!b.data.info)throw new Error("RPC error: ",b.status);console.log("resource put call successful for: "+a)}))}function d(a,c){var d=window.prompt("Enter the datapoint you would like to add below.");return null===d?void console.log("CANCEL write for rid "+c):(console.log("CONFIRM write for rid "+c+" data="+d),b.put("rpc/resource/"+a+"/"+c+"/"+d).then(function(a){if(200!==a.status)throw new Error("/rpc/resource put call from deleteByRid failed");if(!a.data.info)throw new Error("RPC error: ",a.status);console.log("resource put call successful for: "+c)}))}function e(){return b.get("/rpc").then(function(c){function d(a,b){for(var c=0;c<a.length;c++){console.log(a[c].rid,":",b.aliases[a[c].rid],":",a[c].type);var f=b.aliases[a[c].rid];f?a[c].name=f[0]:a[c].name="Resource with no alias","client"==a[c].type&&e(a[c].rid),a[c].children&&a[c].children.length>0&&(a[c].children=d(a[c].children,a[c].info))}return a}function e(a){return console.log("storeDeviceCiks called"),b.get("rpc/getcik/"+a).then(function(b){if(200!==b.status)throw new Error("/rpc/getcik put call from storeDeviceCiks failed");if(!b.data.info)throw new Error("RPC getcik error: ",b.status);return"cik stored for: "+a})}if(200!==c.status)throw new Error("/rpc call from getDevices failed");if(!c.data.info)throw new Error("no valid auth provided");$("#deviceTest").show();var f=c.data.children,g=c.data.info;return f=d(f,g),a.device={},a.devices=f,console.log("scope.devices set to: ",f),c.data.children})}console.log("app.controller entered"),a.device={},a.childDevice={},a.devices=[],e(),a.deleteByRid=c,a.getDevices=e,a.writeToDataport=d}]);