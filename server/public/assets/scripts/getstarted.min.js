/*! 2016-01-22*/
$(document).ready(function(){function a(a,b,c){var e=b+":"+c,f=btoa(e);console.log("Auth",f),$.ajax({type:"POST",url:"/auth/uauth",data:{url:a,uauth:f},complete:function(){console.log("post call complete")},success:function(a){console.log("post call success: ",a),d()},error:function(a,b){console.log("post error: ",b)}})}function b(a){$.ajax({type:"POST",url:"/auth/cik",data:{cik:a},complete:function(){console.log("CIK post call complete")},success:function(a){console.log("CIK post call success: ",a),d()},error:function(a,b){console.log("CIK post error: ",b)}})}function c(){$.ajax({type:"DELETE",url:"/auth",complete:function(){console.log("delete call complete")},success:function(a){console.log("Delete successful: ",a)},error:function(a,b){console.log("delete error: ",b)}})}function d(){$.ajax({type:"GET",url:"/auth",complete:function(){console.log("get call complete")},success:function(a){console.log("get call success: ",a),a.cik&&($("#cikInput").val(a.cik),e()),a.portalName&&$("#cikStatus").html("Portal accessed: "+a.portalName)},error:function(a,b){console.log("get error: ",b)}})}function e(){$.ajax({type:"GET",url:"/rpc/info",complete:function(){console.log("get call complete")},success:function(a){if(console.log("get call success: ",a),a.description){var b=a.description.name;$("#cikStatus").html("Portal accessed: "+b)}else $("#cikStatus").html("<span class='warn-text'>Your CIK is not valid. Please correct and try again.</span>"),c()},error:function(a,b){console.log("/rpc/info get call error: ",b)}})}d(),$("#cikInput").keypress(function(a){return 13==a.which?($("#submitCik").click(),!1):void 0}),$("#submitCik").on("click",function(){console.log("submitCik");var a=$("#cikInput").val();console.log("cik: ",a),b(a)}),$("#submitUauth").on("click",function(){console.log("submitUauth");var b=$("#uauthForm").serializeArray();console.log("uAuthArray: ",b);var c=b[0].value,d=b[1].value,e=b[2].value;console.log("url, username, pw",c,d,e),a(c,d,e)}),$("#clearUauth, #clearCik").on("click",function(){$("#cikStatus").html("<em>Enter a valid CIK to begin.</em>"),$("#cikInput").val(""),c()})});