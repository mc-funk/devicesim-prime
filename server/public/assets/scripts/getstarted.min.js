/*! 2016-01-28*/
$(document).ready(function(){function a(a){$.ajax({type:"POST",url:"/auth/cik",data:{cik:a},complete:function(){console.log("CIK post call complete")},success:function(a){console.log("CIK post call success: ",a),c(),$("#deviceRefresh").click()},error:function(a,b){console.log("CIK post error: ",b)}})}function b(){$.ajax({type:"DELETE",url:"/auth",complete:function(){console.log("delete call complete")},success:function(a){console.log("Delete successful: ",a)},error:function(a,b){console.log("delete error: ",b)}})}function c(){$.ajax({type:"GET",url:"/auth",complete:function(){console.log("get call complete")},success:function(a){console.log("get call success: ",a),a.cik&&($("#cikInput").val(a.cik),d()),a.portalName&&$("#cikStatus").html("Portal accessed: "+a.portalName)},error:function(a,b){console.log("get error: ",b)}})}function d(){$.ajax({type:"GET",url:"/rpc/info",complete:function(){console.log("get call complete")},success:function(a){if(console.log("get call success: ",a),a.description){$(".deviceTest").show();var c=a.description.name;$("#cikStatus").html("Portal accessed: "+c)}else $("#cikStatus").html("<span class='warn-text'>Your CIK is not valid. Please correct and try again.</span>"),$("#deviceTest").hide(),b()},error:function(a,b){console.log("/rpc/info get call error: ",b)}})}c(),$(".nav a").on("click",function(){$(".currentNav").removeClass("currentNav"),$(this).addClass("currentNav")}),$("#cikInput").keypress(function(a){return 13==a.which?($("#submitCik").click(),!1):void 0}),$("#submitCik").on("click",function(){console.log("submitCik");var c=$("#cikInput").val();console.log("cik: ",c),b(),a(c)}),$("#clearUauth, #clearCik").on("click",function(){$("#cikStatus").html("<em>Enter a valid CIK to begin.</em>"),$("#cikInput").val(""),$("#deviceTest").hide(),b()})});